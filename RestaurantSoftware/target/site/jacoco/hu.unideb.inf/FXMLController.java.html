<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="hu"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FXMLController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">RestaurantSoftware</a> &gt; <a href="index.source.html" class="el_package">hu.unideb.inf</a> &gt; <span class="el_source">FXMLController.java</span></div><h1>FXMLController.java</h1><pre class="source lang-java linenums">
package hu.unideb.inf;

import java.io.FileNotFoundException;
import java.io.PrintStream;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import java.util.ResourceBundle;
import javafx.event.ActionEvent;
import javafx.event.EventType;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.Node;
import javafx.scene.control.Alert;
import javafx.scene.control.Alert.AlertType;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ScrollPane;
import javafx.scene.layout.AnchorPane;

<span class="nc" id="L22">public class FXMLController implements Initializable {</span>
    
    private int index;
    private int number;
    private int indexOfTable;
    private int indexOfFood;
    private int currentTable;
<span class="nc" id="L29">    private boolean tableEquals = false;</span>
<span class="nc" id="L30">    private boolean foodEquals = false;</span>
<span class="nc" id="L31">    List&lt;Table&gt; table = new ArrayList&lt;&gt;();</span>
    

    @FXML
    private AnchorPane rootPane;
    @FXML
    private Label orderLabel;
    @FXML
    private Label tableOutWrite;
    @FXML
    private ScrollPane scrollText;
    @FXML
    private Button button0;
    @FXML
    private Button button1;
    @FXML
    private Button button2;
    @FXML
    private Button button3;
    @FXML
    private Button num;
    @FXML
    private Button payButton;
    @FXML
    private Button deleteButton;
    @FXML
    private Button orderButton;
   
    @Override
    public void initialize(URL url, ResourceBundle rb) {
        // TODO
<span class="nc" id="L62">    }    </span>
    
    @FXML
    private void handleButton00Action(ActionEvent event) {
<span class="nc" id="L66">        handleButtonFunction(&quot;Húsleves&quot;, 799);</span>
<span class="nc" id="L67">    }</span>
    
    @FXML
    private void handleButton01Action(ActionEvent event) {
<span class="nc" id="L71">        handleButtonFunction(&quot;Bableves&quot;, 699);</span>
<span class="nc" id="L72">    }</span>

    @FXML
    private void handleButton02Action(ActionEvent event) {
<span class="nc" id="L76">        handleButtonFunction(&quot;Gyümölcsleves&quot;, 599);</span>
<span class="nc" id="L77">    }</span>

    @FXML
    private void handleButton03Action(ActionEvent event) {
<span class="nc" id="L81">        handleButtonFunction(&quot;Paradicsomleves&quot;, 499);</span>
<span class="nc" id="L82">    }</span>

    @FXML
    private void handleButton10Action(ActionEvent event) {
<span class="nc" id="L86">        handleButtonFunction(&quot;Marhapörkölt&quot;, 999);</span>
<span class="nc" id="L87">    }</span>

    @FXML
    private void handleButton11Action(ActionEvent event) {
<span class="nc" id="L91">        handleButtonFunction(&quot;Túróstészta&quot;, 599);</span>
<span class="nc" id="L92">    }</span>

    @FXML
    private void handleButton12Action(ActionEvent event) {
<span class="nc" id="L96">        handleButtonFunction(&quot;Töltöttkáposzta&quot;, 799);</span>
<span class="nc" id="L97">    }</span>

    @FXML
    private void handleButton13Action(ActionEvent event) {
<span class="nc" id="L101">        handleButtonFunction(&quot;Rántotthús&quot;, 499);</span>
<span class="nc" id="L102">    }</span>

    @FXML
    private void handleButton20Action(ActionEvent event) {
<span class="nc" id="L106">        handleButtonFunction(&quot;Palacsinta&quot;, 299);</span>
<span class="nc" id="L107">    }</span>

    @FXML
    private void handleButton21Action(ActionEvent event) {
<span class="nc" id="L111">        handleButtonFunction(&quot;Mákosguba&quot;, 399);</span>
<span class="nc" id="L112">    }</span>

    @FXML
    private void handleButton22Action(ActionEvent event) {
<span class="nc" id="L116">        handleButtonFunction(&quot;Aranygaluska&quot;, 499);</span>
<span class="nc" id="L117">    }</span>

    @FXML
    private void handleButton23Action(ActionEvent event) {
<span class="nc" id="L121">        handleButtonFunction(&quot;Csokitorta&quot;, 299);</span>
<span class="nc" id="L122">    }</span>

    @FXML
    private void handleButton30Action(ActionEvent event) {
<span class="nc" id="L126">        handleButtonFunction(&quot;Coca-cola&quot;, 299);</span>
<span class="nc" id="L127">    }</span>

    @FXML
    private void handleButton31Action(ActionEvent event) {
<span class="nc" id="L131">        handleButtonFunction(&quot;Pepsi&quot;, 299);</span>
<span class="nc" id="L132">    }</span>

    @FXML
    private void handleButton32Action(ActionEvent event) {
<span class="nc" id="L136">        handleButtonFunction(&quot;Ásványvíz&quot;, 199);</span>
<span class="nc" id="L137">    }</span>

    @FXML
    private void handleButton33Action(ActionEvent event) {
<span class="nc" id="L141">        handleButtonFunction(&quot;Zöldtea&quot;, 299);</span>
<span class="nc" id="L142">    }</span>

    @FXML
    private void handleButtonNumber7Action(ActionEvent event) {
<span class="nc" id="L146">        number = 7;</span>
<span class="nc" id="L147">        System.out.println(number);</span>
<span class="nc" id="L148">    }</span>

    @FXML
    public void handleButtonNumber4Action(ActionEvent event) {
<span class="nc" id="L152">        number = 4;</span>
<span class="nc" id="L153">        System.out.println(number);</span>
<span class="nc" id="L154">    }</span>

    @FXML
    private void handleButtonNumber1Action(ActionEvent event) {
<span class="nc" id="L158">        number = 1;</span>
<span class="nc" id="L159">        System.out.println(number);</span>
<span class="nc" id="L160">    }</span>

    @FXML
    private void handleButtonNumber8Action(ActionEvent event) {
<span class="nc" id="L164">        number = 8;</span>
<span class="nc" id="L165">        System.out.println(number);</span>
<span class="nc" id="L166">    }</span>

    @FXML
    private void handleButtonNumber5Action(ActionEvent event) {
<span class="nc" id="L170">        number = 5;</span>
<span class="nc" id="L171">        System.out.println(number);</span>
<span class="nc" id="L172">    }</span>

    @FXML
    private void handleButtonNumber2Action(ActionEvent event) {
<span class="nc" id="L176">        number = 2;</span>
<span class="nc" id="L177">        System.out.println(number);</span>
<span class="nc" id="L178">    }</span>
    
    @FXML
    private void handleButtonNumber9Action(ActionEvent event) {
<span class="nc" id="L182">        number = 9;</span>
<span class="nc" id="L183">        System.out.println(number);</span>
<span class="nc" id="L184">    }</span>

    @FXML
    private void handleButtonNumber6Action(ActionEvent event) {
<span class="nc" id="L188">        number = 6;</span>
<span class="nc" id="L189">        System.out.println(number);</span>
<span class="nc" id="L190">    }</span>

    @FXML
    private void handleButtonNumber3Action(ActionEvent event) {
<span class="nc" id="L194">        number = 3;</span>
<span class="nc" id="L195">        System.out.println(number);</span>
<span class="nc" id="L196">    }</span>

    @FXML
    private void handleButtonNumber0Action(ActionEvent event) {
<span class="nc" id="L200">        number = 0;</span>
<span class="nc" id="L201">        System.out.println(number);</span>
<span class="nc" id="L202">    }</span>

    @FXML
    private void handleButtonPayAction(ActionEvent event) {
<span class="nc bnc" id="L206" title="All 2 branches missed.">        if (table.get(index) != null) {</span>
            
            //végösszeget kiszámolni
<span class="nc" id="L209">            int sum = 0;</span>
<span class="nc bnc" id="L210" title="All 2 branches missed.">            for (Food food : table.get(index).foods) {</span>
<span class="nc" id="L211">                sum += food.getQuantity()*food.getPrice();</span>
<span class="nc" id="L212">            }</span>
            
            //fájlba kiírni
            
<span class="nc" id="L216">            try (PrintStream ps = new PrintStream(&quot;elszamolas.txt&quot;)){</span>
<span class="nc" id="L217">                String csg = &quot;A(z) &quot; + currentTable + &quot;. számú asztal számlája\n&quot;;</span>
<span class="nc" id="L218">                ps.append(csg);</span>
<span class="nc bnc" id="L219" title="All 2 branches missed.">                for (Food food : table.get(index).foods) {</span>
<span class="nc" id="L220">                    csg = food.toString() + &quot;\n&quot;;</span>
<span class="nc" id="L221">                    ps.append(csg);</span>
<span class="nc" id="L222">                }</span>
<span class="nc" id="L223">                csg = &quot;\nVégösszeg: &quot; + sum + &quot;\n&quot;;</span>
<span class="nc" id="L224">                ps.append(csg);</span>
<span class="nc" id="L225">            } catch (FileNotFoundException ex) {</span>
<span class="nc" id="L226">                System.err.println(&quot;Hiba az állomány megnyitásakor: &quot; + ex.getMessage());</span>
<span class="nc" id="L227">                System.exit(1);</span>
<span class="nc" id="L228">            }</span>
            
            //alarm ablakba kiírni a tételeket
<span class="nc" id="L231">            Alert alert = new Alert(AlertType.INFORMATION);</span>
<span class="nc" id="L232">            alert.setTitle(&quot;Fizetés&quot;);</span>
<span class="nc" id="L233">            alert.setHeaderText(&quot;A(z) &quot; + currentTable + &quot;. számú asztal\n\nA fizetendő összeg: &quot; + sum + &quot; forint!&quot;);</span>
<span class="nc" id="L234">            alert.setContentText(&quot;Köszönjük, hogy nálunk vásárolt!\n\nJó étvágyat kívánunk!&quot;);</span>
<span class="nc" id="L235">            alert.showAndWait();</span>

<span class="nc" id="L237">            table.remove(index);</span>
<span class="nc" id="L238">            orderLabel.setText(&quot;&quot;);</span>
<span class="nc" id="L239">            currentTable = 0;</span>
        }
<span class="nc" id="L241">    }</span>
    
    @FXML
    private void handleButtonDeleteAction(ActionEvent event) {
<span class="nc bnc" id="L245" title="All 2 branches missed.">        if (table.get(index).foods.size() &gt; 0) {</span>
<span class="nc bnc" id="L246" title="All 2 branches missed.">            if (number == 0){</span>
<span class="nc" id="L247">                table.get(index).foods.remove(table.get(index).foods.size()-1);</span>
            } else {
<span class="nc" id="L249">                number = 0;</span>
            }
<span class="nc" id="L251">            orderLabel.setText(table.get(index).toString());</span>
        }
<span class="nc" id="L253">    }</span>
    
    @FXML
    private void handleButtonOrderAction(ActionEvent event) {
<span class="nc" id="L257">        orderLabel.setText(&quot;&quot;);</span>
<span class="nc" id="L258">        tableOutWrite.setText(&quot;&quot; + number);</span>
<span class="nc" id="L259">        currentTable = number;</span>
        
        //ha nem volt egy asztal sem létrehozunk egy 0-s asztalt
<span class="nc bnc" id="L262" title="All 2 branches missed.">        if (table.size() == 0) {</span>
            //food.add(new Food());
<span class="nc" id="L264">            Table tb = new Table(0);</span>
<span class="nc" id="L265">            table.add(tb);</span>
<span class="nc" id="L266">        }</span>
        else {
<span class="nc" id="L268">            index = table.size();</span>
            //körbejárjuk az asztalokat
<span class="nc bnc" id="L270" title="All 2 branches missed.">            for (Table tb : table) {</span>
                //ha találunk egyező asztalt
<span class="nc bnc" id="L272" title="All 2 branches missed.">                if (tb.getTableNumber() == currentTable) {</span>
<span class="nc" id="L273">                    index = table.indexOf(tb);</span>
<span class="nc" id="L274">                    orderLabel.setText(table.get(index).toString());</span>
                    //tableEquals = true;
                }
<span class="nc" id="L277">            }</span>
        }
        //tableEquals = false;
<span class="nc" id="L280">        number = 0;</span>
<span class="nc" id="L281">    }</span>
    public void handleButtonFunction(String foodName, int foodPrice) {
        
<span class="nc" id="L284">        int sum = 0;</span>
<span class="nc" id="L285">        Food foodTemp = null;</span>
<span class="nc" id="L286">        Table tableTemp = null;</span>
<span class="nc" id="L287">        List&lt;Food&gt; food = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L288">        List&lt;Food&gt; tempFood = new ArrayList&lt;&gt;();</span>
        
        //ha nem választunk mennyiséget akkor automatikusan 1
<span class="nc bnc" id="L291" title="All 2 branches missed.">        if (number == 0) number = 1;</span>
<span class="nc" id="L292">        food.add(new Food(number, foodName, foodPrice));</span>
<span class="nc" id="L293">        System.out.println(food.toString());</span>
        
        //ha nem volt egy asztal sem létrehozunk egyet
<span class="nc bnc" id="L296" title="All 2 branches missed.">        if (table.size() == 0) {</span>
<span class="nc" id="L297">            table.add(new Table(currentTable, food));</span>
        } else {
<span class="nc" id="L299">            indexOfTable = table.size();</span>
<span class="nc bnc" id="L300" title="All 2 branches missed.">            for (Table tb : table) {</span>
                //ha találunk egyező asztalt
<span class="nc bnc" id="L302" title="All 2 branches missed.">                if (tb.getTableNumber() == currentTable) {</span>
<span class="nc" id="L303">                    tableEquals = true;</span>
<span class="nc" id="L304">                    indexOfTable = table.indexOf(tb);</span>
<span class="nc" id="L305">                    tempFood = tb.getFoods();</span>
                }
<span class="nc" id="L307">            }</span>
            //ha már találtunk egyező asztalt (Asztal gombban kiértékelve)
<span class="nc bnc" id="L309" title="All 2 branches missed.">            if (tableEquals) {</span>
                //körbejárjuk az adott asztal ételeit
<span class="nc bnc" id="L311" title="All 2 branches missed.">                for (Food foo : tempFood) {</span>
                    //megvizsgáljuk hogy volt e már rendelve a kért étel erre az asztalra
<span class="nc bnc" id="L313" title="All 2 branches missed.">                    if (foo.getName().equals(foodName)) {</span>
<span class="nc" id="L314">                        foodEquals = true;</span>
<span class="nc" id="L315">                        indexOfFood = tempFood.indexOf(foo);</span>
                        //másolatot készítünk az egyezett ételről
<span class="nc" id="L317">                        foodTemp = foo;</span>
                    }
<span class="nc" id="L319">                }</span>
                //ha volt már a listában a kért étel
<span class="nc bnc" id="L321" title="All 2 branches missed.">                if (foodEquals) {</span>
                    //összegezzük a most kiválasztott mennyiségett az eddigi mennyiséggel
<span class="nc" id="L323">                    sum = number + table.get(indexOfTable).getFoods().get(indexOfFood).getQuantity();</span>
                    //lemásoljuk a kiválaszott ételt )előtte megtettük
                    //foodTemp = table.get(indexOfTable).getFoods().get(indexOfFood);
                    //eltávolítjuk a kiválasztott ételt egy ezelőtt használt étellista másolatból
<span class="nc" id="L327">                    tempFood.remove(foodTemp);</span>
                    //hozzáadjuk az ételt, az új darabértékkel ehhez a másolt listához
<span class="nc" id="L329">                    tempFood.add(new Food(sum, foodName, foodPrice));</span>
                    //készítünk egy asztal lista másolatot az adott asztalról
<span class="nc" id="L331">                    tableTemp = table.get(indexOfTable);</span>
                    //eltávolítjuk ideiglenesen az adott asztalt
<span class="nc" id="L333">                    table.remove(tableTemp);</span>
                    //készítünk egy új asztalt a meglévő asztalszámmal és az új étellistával
<span class="nc" id="L335">                    tableTemp = new Table(currentTable, tempFood);</span>
                    //hozzáadjuk az asztallistához az &quot;újraformázott&quot; asztalt
<span class="nc" id="L337">                    table.add(tableTemp);</span>
                } else {
                    //ha nem volt étel egyezés
                    //hozzáadjuk az ételt, az új darabértékkel ehhez a másolt listához
<span class="nc" id="L341">                    tempFood.add(new Food(number, foodName, foodPrice));</span>
                    //készítünk egy asztal lista másolatot az adott asztalról
<span class="nc" id="L343">                    tableTemp = table.get(indexOfTable);</span>
                    //eltávolítjuk ideiglenesen az adott asztalt
<span class="nc" id="L345">                    table.remove(tableTemp);</span>
                    //készítünk egy új asztalt a meglévő asztalszámmal és az új étellistával
<span class="nc" id="L347">                    tableTemp = new Table(currentTable, tempFood);</span>
                    //hozzáadjuk az asztallistához az &quot;újraformázott&quot; asztalt
<span class="nc" id="L349">                    table.add(tableTemp);</span>
                }
            } else {
                //ha nem volt asztal egyezés létrehozunk egy új asztalt a megadott étellel
<span class="nc" id="L353">                table.add(new Table(currentTable, food));</span>
            }
        }
        
        //Megjelenítés
<span class="nc" id="L358">        orderLabel.setText(table.get(indexOfTable).toString());</span>
<span class="nc" id="L359">        System.out.println(table.get(indexOfTable).toString());</span>
        
        //mindent lenullázunk
<span class="nc" id="L362">        number = 0;</span>
<span class="nc" id="L363">        indexOfTable = 0;</span>
<span class="nc" id="L364">        indexOfFood = 0;</span>
<span class="nc" id="L365">        indexOfTable = 0;</span>
<span class="nc" id="L366">        tableEquals = false;</span>
<span class="nc" id="L367">        foodEquals = false;</span>
        //tableTemp = null;
        //tempFood = null;
<span class="nc" id="L370">    }</span>
    
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>