<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="hu"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FXMLController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">RestaurantSoftware</a> &gt; <a href="index.source.html" class="el_package">hu.unideb.inf</a> &gt; <span class="el_source">FXMLController.java</span></div><h1>FXMLController.java</h1><pre class="source lang-java linenums">
package hu.unideb.inf;

import java.io.FileNotFoundException;
import java.io.PrintStream;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import java.util.ResourceBundle;
import javafx.event.ActionEvent;
import javafx.event.EventType;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.Node;
import javafx.scene.control.Alert;
import javafx.scene.control.Alert.AlertType;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ScrollPane;
import javafx.scene.layout.AnchorPane;

<span class="nc" id="L22">public class FXMLController implements Initializable {</span>
    
    private int index;
    private int number;
    private int indexOfTable;
    private int indexOfFood;
    private int currentTable;
<span class="nc" id="L29">    private boolean tableEquals = false;</span>
<span class="nc" id="L30">    private boolean foodEquals = false;</span>
<span class="nc" id="L31">    List&lt;Table&gt; table = new ArrayList&lt;&gt;();</span>
    

    @FXML
    private AnchorPane rootPane;
    @FXML
    private Label orderLabel;
    @FXML
    private Label tableOutWrite;
    @FXML
    private ScrollPane scrollText;
    @FXML
    private Button button0;
    @FXML
    private Button button1;
    @FXML
    private Button button2;
    @FXML
    private Button button3;
    @FXML
    private Button num;
    @FXML
    private Button payButton;
    @FXML
    private Button deleteButton;
    @FXML
    private Button orderButton;
    @FXML
    private Button changer;
   
    @Override
    public void initialize(URL url, ResourceBundle rb) {
        // TODO
<span class="nc" id="L64">    }    </span>
    
    @FXML
    private void handleButton00Action(ActionEvent event) {
<span class="nc" id="L68">        handleButtonFunction(&quot;Húsleves&quot;, 799);</span>
<span class="nc" id="L69">    }</span>
    
    @FXML
    private void handleButton01Action(ActionEvent event) {
<span class="nc" id="L73">        handleButtonFunction(&quot;Bableves&quot;, 699);</span>
<span class="nc" id="L74">    }</span>

    @FXML
    private void handleButton02Action(ActionEvent event) {
<span class="nc" id="L78">        handleButtonFunction(&quot;Gyümölcsleves&quot;, 599);</span>
<span class="nc" id="L79">    }</span>

    @FXML
    private void handleButton03Action(ActionEvent event) {
<span class="nc" id="L83">        handleButtonFunction(&quot;Paradicsomleves&quot;, 499);</span>
<span class="nc" id="L84">    }</span>

    @FXML
    private void handleButton10Action(ActionEvent event) {
<span class="nc" id="L88">        handleButtonFunction(&quot;Marhapörkölt&quot;, 999);</span>
<span class="nc" id="L89">    }</span>

    @FXML
    private void handleButton11Action(ActionEvent event) {
<span class="nc" id="L93">        handleButtonFunction(&quot;Túróstészta&quot;, 599);</span>
<span class="nc" id="L94">    }</span>

    @FXML
    private void handleButton12Action(ActionEvent event) {
<span class="nc" id="L98">        handleButtonFunction(&quot;Töltöttkáposzta&quot;, 799);</span>
<span class="nc" id="L99">    }</span>

    @FXML
    private void handleButton13Action(ActionEvent event) {
<span class="nc" id="L103">        handleButtonFunction(&quot;Rántotthús&quot;, 499);</span>
<span class="nc" id="L104">    }</span>

    @FXML
    private void handleButton20Action(ActionEvent event) {
<span class="nc" id="L108">        handleButtonFunction(&quot;Palacsinta&quot;, 299);</span>
<span class="nc" id="L109">    }</span>

    @FXML
    private void handleButton21Action(ActionEvent event) {
<span class="nc" id="L113">        handleButtonFunction(&quot;Mákosguba&quot;, 399);</span>
<span class="nc" id="L114">    }</span>

    @FXML
    private void handleButton22Action(ActionEvent event) {
<span class="nc" id="L118">        handleButtonFunction(&quot;Aranygaluska&quot;, 499);</span>
<span class="nc" id="L119">    }</span>

    @FXML
    private void handleButton23Action(ActionEvent event) {
<span class="nc" id="L123">        handleButtonFunction(&quot;Csokitorta&quot;, 299);</span>
<span class="nc" id="L124">    }</span>

    @FXML
    private void handleButton30Action(ActionEvent event) {
<span class="nc" id="L128">        handleButtonFunction(&quot;Coca-cola&quot;, 299);</span>
<span class="nc" id="L129">    }</span>

    @FXML
    private void handleButton31Action(ActionEvent event) {
<span class="nc" id="L133">        handleButtonFunction(&quot;Pepsi&quot;, 299);</span>
<span class="nc" id="L134">    }</span>

    @FXML
    private void handleButton32Action(ActionEvent event) {
<span class="nc" id="L138">        handleButtonFunction(&quot;Ásványvíz&quot;, 199);</span>
<span class="nc" id="L139">    }</span>

    @FXML
    private void handleButton33Action(ActionEvent event) {
<span class="nc" id="L143">        handleButtonFunction(&quot;Zöldtea&quot;, 299);</span>
<span class="nc" id="L144">    }</span>
    
    @FXML
    private void changeButton00(ActionEvent event) {
        
<span class="nc" id="L149">    }</span>
    @FXML
    private void changeButton01(ActionEvent event) {
        
<span class="nc" id="L153">    }</span>
    @FXML
    private void changeButton10(ActionEvent event) {
        
<span class="nc" id="L157">    }</span>
    @FXML
    private void changeButton11(ActionEvent event) {
        
<span class="nc" id="L161">    }</span>
    @FXML
    private void changeButton20(ActionEvent event) {
        
<span class="nc" id="L165">    }</span>
    @FXML
    private void changeButton21(ActionEvent event) {
        
<span class="nc" id="L169">    }</span>
    @FXML
    private void changeButton30(ActionEvent event) {
        
<span class="nc" id="L173">    }</span>
    @FXML
    private void changeButton31(ActionEvent event) {
        
<span class="nc" id="L177">    }</span>

    @FXML
    private void handleButtonNumber7Action(ActionEvent event) {
<span class="nc" id="L181">        number = 7;</span>
<span class="nc" id="L182">        System.out.println(number);</span>
<span class="nc" id="L183">    }</span>

    @FXML
    public void handleButtonNumber4Action(ActionEvent event) {
<span class="nc" id="L187">        number = 4;</span>
<span class="nc" id="L188">        System.out.println(number);</span>
<span class="nc" id="L189">    }</span>

    @FXML
    private void handleButtonNumber1Action(ActionEvent event) {
<span class="nc" id="L193">        number = 1;</span>
<span class="nc" id="L194">        System.out.println(number);</span>
<span class="nc" id="L195">    }</span>

    @FXML
    private void handleButtonNumber8Action(ActionEvent event) {
<span class="nc" id="L199">        number = 8;</span>
<span class="nc" id="L200">        System.out.println(number);</span>
<span class="nc" id="L201">    }</span>

    @FXML
    private void handleButtonNumber5Action(ActionEvent event) {
<span class="nc" id="L205">        number = 5;</span>
<span class="nc" id="L206">        System.out.println(number);</span>
<span class="nc" id="L207">    }</span>

    @FXML
    private void handleButtonNumber2Action(ActionEvent event) {
<span class="nc" id="L211">        number = 2;</span>
<span class="nc" id="L212">        System.out.println(number);</span>
<span class="nc" id="L213">    }</span>
    
    @FXML
    private void handleButtonNumber9Action(ActionEvent event) {
<span class="nc" id="L217">        number = 9;</span>
<span class="nc" id="L218">        System.out.println(number);</span>
<span class="nc" id="L219">    }</span>

    @FXML
    private void handleButtonNumber6Action(ActionEvent event) {
<span class="nc" id="L223">        number = 6;</span>
<span class="nc" id="L224">        System.out.println(number);</span>
<span class="nc" id="L225">    }</span>

    @FXML
    private void handleButtonNumber3Action(ActionEvent event) {
<span class="nc" id="L229">        number = 3;</span>
<span class="nc" id="L230">        System.out.println(number);</span>
<span class="nc" id="L231">    }</span>

    @FXML
    private void handleButtonNumber0Action(ActionEvent event) {
<span class="nc" id="L235">        number = 0;</span>
<span class="nc" id="L236">        System.out.println(number);</span>
<span class="nc" id="L237">    }</span>

    @FXML
    private void handleButtonPayAction(ActionEvent event) {
<span class="nc bnc" id="L241" title="All 2 branches missed.">        if (table.get(index) != null) {</span>
            
            //végösszeget kiszámolni
<span class="nc" id="L244">            int sum = 0;</span>
<span class="nc bnc" id="L245" title="All 2 branches missed.">            for (Food food : table.get(index).foods) {</span>
<span class="nc" id="L246">                sum += food.getQuantity()*food.getPrice();</span>
<span class="nc" id="L247">            }</span>
            
            //fájlba kiírni
            
<span class="nc" id="L251">            try (PrintStream ps = new PrintStream(&quot;elszamolas.txt&quot;)){</span>
<span class="nc" id="L252">                String csg = &quot;A(z) &quot; + currentTable + &quot;. számú asztal számlája\n&quot;;</span>
<span class="nc" id="L253">                ps.append(csg);</span>
<span class="nc bnc" id="L254" title="All 2 branches missed.">                for (Food food : table.get(index).foods) {</span>
<span class="nc" id="L255">                    csg = food.toString() + &quot;\n&quot;;</span>
<span class="nc" id="L256">                    ps.append(csg);</span>
<span class="nc" id="L257">                }</span>
<span class="nc" id="L258">                csg = &quot;\nVégösszeg: &quot; + sum + &quot;\n&quot;;</span>
<span class="nc" id="L259">                ps.append(csg);</span>
<span class="nc" id="L260">            } catch (FileNotFoundException ex) {</span>
<span class="nc" id="L261">                System.err.println(&quot;Hiba az állomány megnyitásakor: &quot; + ex.getMessage());</span>
<span class="nc" id="L262">                System.exit(1);</span>
<span class="nc" id="L263">            }</span>
            
            //alarm ablakba kiírni a tételeket
<span class="nc" id="L266">            Alert alert = new Alert(AlertType.INFORMATION);</span>
<span class="nc" id="L267">            alert.setTitle(&quot;Fizetés&quot;);</span>
<span class="nc" id="L268">            alert.setHeaderText(&quot;A(z) &quot; + currentTable + &quot;. számú asztal\n\nA fizetendő összeg: &quot; + sum + &quot; forint!&quot;);</span>
<span class="nc" id="L269">            alert.setContentText(&quot;Köszönjük, hogy nálunk vásárolt!\n\nJó étvágyat kívánunk!&quot;);</span>
<span class="nc" id="L270">            alert.showAndWait();</span>

<span class="nc" id="L272">            table.remove(index);</span>
<span class="nc" id="L273">            orderLabel.setText(&quot;&quot;);</span>
<span class="nc" id="L274">            currentTable = 0;</span>
        }
<span class="nc" id="L276">    }</span>
    
    @FXML
    private void handleButtonDeleteAction(ActionEvent event) {
<span class="nc bnc" id="L280" title="All 2 branches missed.">        if (table.get(index).foods.size() &gt; 0) {</span>
<span class="nc bnc" id="L281" title="All 2 branches missed.">            if (number == 0){</span>
<span class="nc" id="L282">                table.get(index).foods.remove(table.get(index).foods.size()-1);</span>
            } else {
<span class="nc" id="L284">                number = 0;</span>
            }
<span class="nc" id="L286">            orderLabel.setText(table.get(index).toString());</span>
        }
<span class="nc" id="L288">    }</span>
    
    @FXML
    private void handleButtonOrderAction(ActionEvent event) {
<span class="nc" id="L292">        orderLabel.setText(&quot;&quot;);</span>
<span class="nc" id="L293">        tableOutWrite.setText(&quot;&quot; + number);</span>
<span class="nc" id="L294">        currentTable = number;</span>
        
        //ha nem volt egy asztal sem létrehozunk egy 0-s asztalt
<span class="nc bnc" id="L297" title="All 2 branches missed.">        if (table.size() == 0) {</span>
            //food.add(new Food());
<span class="nc" id="L299">            Table tb = new Table(0);</span>
<span class="nc" id="L300">            table.add(tb);</span>
<span class="nc" id="L301">        }</span>
        else {
<span class="nc" id="L303">            index = table.size();</span>
            //körbejárjuk az asztalokat
<span class="nc bnc" id="L305" title="All 2 branches missed.">            for (Table tb : table) {</span>
                //ha találunk egyező asztalt
<span class="nc bnc" id="L307" title="All 2 branches missed.">                if (tb.getTableNumber() == currentTable) {</span>
<span class="nc" id="L308">                    index = table.indexOf(tb);</span>
<span class="nc" id="L309">                    orderLabel.setText(table.get(index).toString());</span>
                }
<span class="nc" id="L311">            }</span>
        }
<span class="nc" id="L313">        number = 0;</span>
<span class="nc" id="L314">    }</span>
    
    @FXML
    private void changerButton (ActionEvent event) {
        
<span class="nc" id="L319">    }</span>
    
    public void handleButtonFunction(String foodName, int foodPrice) {
        
<span class="nc" id="L323">        int sum = 0;</span>
<span class="nc" id="L324">        Food foodTemp = null;</span>
<span class="nc" id="L325">        Table tableTemp = null;</span>
<span class="nc" id="L326">        List&lt;Food&gt; food = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L327">        List&lt;Food&gt; tempFood = new ArrayList&lt;&gt;();</span>
        
        //ha nem választunk mennyiséget akkor automatikusan 1
<span class="nc bnc" id="L330" title="All 2 branches missed.">        if (number == 0) number = 1;</span>
<span class="nc" id="L331">        food.add(new Food(number, foodName, foodPrice));</span>
<span class="nc" id="L332">        System.out.println(food.toString());</span>
        
        //ha nem volt egy asztal sem létrehozunk egyet
<span class="nc bnc" id="L335" title="All 2 branches missed.">        if (table.size() == 0) {</span>
<span class="nc" id="L336">            table.add(new Table(currentTable, food));</span>
        } else {
<span class="nc" id="L338">            indexOfTable = table.size();</span>
<span class="nc bnc" id="L339" title="All 2 branches missed.">            for (Table tb : table) {</span>
                //ha találunk egyező asztalt
<span class="nc bnc" id="L341" title="All 2 branches missed.">                if (tb.getTableNumber() == currentTable) {</span>
<span class="nc" id="L342">                    tableEquals = true;</span>
<span class="nc" id="L343">                    indexOfTable = table.indexOf(tb);</span>
<span class="nc" id="L344">                    tempFood = tb.getFoods();</span>
                }
<span class="nc" id="L346">            }</span>
            //ha már találtunk egyező asztalt (Asztal gombban kiértékelve)
<span class="nc bnc" id="L348" title="All 2 branches missed.">            if (tableEquals) {</span>
                //körbejárjuk az adott asztal ételeit
<span class="nc bnc" id="L350" title="All 2 branches missed.">                for (Food foo : tempFood) {</span>
                    //megvizsgáljuk hogy volt e már rendelve a kért étel erre az asztalra
<span class="nc bnc" id="L352" title="All 2 branches missed.">                    if (foo.getName().equals(foodName)) {</span>
<span class="nc" id="L353">                        foodEquals = true;</span>
<span class="nc" id="L354">                        indexOfFood = tempFood.indexOf(foo);</span>
                        //másolatot készítünk az egyezett ételről
<span class="nc" id="L356">                        foodTemp = foo;</span>
                    }
<span class="nc" id="L358">                }</span>
                //ha volt már a listában a kért étel
<span class="nc bnc" id="L360" title="All 2 branches missed.">                if (foodEquals) {</span>
                    //összegezzük a most kiválasztott mennyiségett az eddigi mennyiséggel
<span class="nc" id="L362">                    sum = number + table.get(indexOfTable).getFoods().get(indexOfFood).getQuantity();</span>
                    //lemásoljuk a kiválaszott ételt )előtte megtettük
                    //foodTemp = table.get(indexOfTable).getFoods().get(indexOfFood);
                    //eltávolítjuk a kiválasztott ételt egy ezelőtt használt étellista másolatból
<span class="nc" id="L366">                    tempFood.remove(foodTemp);</span>
                    //hozzáadjuk az ételt, az új darabértékkel ehhez a másolt listához
<span class="nc" id="L368">                    tempFood.add(new Food(sum, foodName, foodPrice));</span>
                    //készítünk egy asztal lista másolatot az adott asztalról
<span class="nc" id="L370">                    tableTemp = table.get(indexOfTable);</span>
                    //eltávolítjuk ideiglenesen az adott asztalt
<span class="nc" id="L372">                    table.remove(tableTemp);</span>
                    //készítünk egy új asztalt a meglévő asztalszámmal és az új étellistával
<span class="nc" id="L374">                    tableTemp = new Table(currentTable, tempFood);</span>
                    //hozzáadjuk az asztallistához az &quot;újraformázott&quot; asztalt
<span class="nc" id="L376">                    table.add(tableTemp);</span>
                } else {
                    //ha nem volt étel egyezés
                    //hozzáadjuk az ételt, az új darabértékkel ehhez a másolt listához
<span class="nc" id="L380">                    tempFood.add(new Food(number, foodName, foodPrice));</span>
                    //készítünk egy asztal lista másolatot az adott asztalról
<span class="nc" id="L382">                    tableTemp = table.get(indexOfTable);</span>
                    //eltávolítjuk ideiglenesen az adott asztalt
<span class="nc" id="L384">                    table.remove(tableTemp);</span>
                    //készítünk egy új asztalt a meglévő asztalszámmal és az új étellistával
<span class="nc" id="L386">                    tableTemp = new Table(currentTable, tempFood);</span>
                    //hozzáadjuk az asztallistához az &quot;újraformázott&quot; asztalt
<span class="nc" id="L388">                    table.add(tableTemp);</span>
                }
            } else {
                //ha nem volt asztal egyezés létrehozunk egy új asztalt a megadott étellel
<span class="nc" id="L392">                table.add(new Table(currentTable, food));</span>
            }
        }
        
        //Megjelenítés
<span class="nc" id="L397">        orderLabel.setText(table.get(indexOfTable).toString());</span>
<span class="nc" id="L398">        System.out.println(table.get(indexOfTable).toString());</span>
        
        //mindent lenullázunk
<span class="nc" id="L401">        number = 0;</span>
<span class="nc" id="L402">        indexOfTable = 0;</span>
<span class="nc" id="L403">        indexOfFood = 0;</span>
<span class="nc" id="L404">        indexOfTable = 0;</span>
<span class="nc" id="L405">        tableEquals = false;</span>
<span class="nc" id="L406">        foodEquals = false;</span>
        //tableTemp = null;
        //tempFood = null;
<span class="nc" id="L409">    }</span>
    
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>